<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cameron Fox</title>

    <!-- Load shared head content -->
    <script>
        fetch("GlobalCode/head.html")
            .then(res => res.text())
            .then(data => {
                document.head.insertAdjacentHTML("beforeend", data);
            });
    </script>
    
    <style>
        .navbar a:hover {
            text-decoration: underline;
        }

        html {
            scroll-behavior: smooth;
        }
    
        section {
            min-height: 10vh;
            padding: 00px 0px;
            position: relative;
        }

        /* Gradient border between sections */
        section:not(:last-of-type)::after {
            content: "";
            display: block;
            width: 100%;
            height: 3px;
            background: linear-gradient(to right, #2196F3, #9C27B0, #f205ea); /*Need to figure out color scheme very soon*/
            margin-top: 0px;
        }
    </style>
</head>
<body>

    <!-- Navbar -->
    <div class="navbar">
        <div class="navbar-links">
            <a href="#home">Home</a>
            <a href="#coding-projects">Projects</a>
            <a href="#work-history">Work History</a>
            <a href="#university">My Education</a>
            <a href="#contact-me">Contact Me</a>
        </div>
    </div>

    <!-- Hamburger button -->
    <button class="hamburger" id="hamburger">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <!-- Sections with dynamic content loading -->
    <section id="home"></section>
    <section id="coding-projects"></section>
    <section id="work-history"></section>
    <section id="university"></section>
    <section id="contact-me"></section>

    <!-- Load all sections -->
    <script>
        // Define which HTML file loads into which section
        const sections = [
            { id: 'home', file: 'Pages/AboutPage.html' },
            { id: 'coding-projects', file: 'Pages/codingPage.html' },
            { id: 'work-history', file: 'Pages/workHistory.html' },
            { id: 'university', file: 'Pages/school.html' },
            { id: 'contact-me', file: 'Pages/ContactMe.html' }
        ];

        // Load each section
        sections.forEach(section => {
            fetch(section.file)
                .then(res => res.text())
                .then(html => {
                    document.getElementById(section.id).innerHTML = html;
                })
                .catch(err => console.error(`Error loading ${section.file}:`, err));
        });
    </script>

    <!-- Carousel JavaScript (must be global) -->
    <script>
        let currentSlideIndex = 1;
        
        function changeSlide(n) {
            showSlide(currentSlideIndex += n);
        }
        
        function currentSlide(n) {
            showSlide(currentSlideIndex = n);
        }
        
        function showSlide(n) {
            const slides = document.getElementsByClassName("carousel-slide");
            const dots = document.getElementsByClassName("dot");
            const arrows = document.getElementsByClassName("carousel-arrow");
            // Loop back to first slide
            if (n > slides.length) {
                currentSlideIndex = 1;
            }
            
            // Loop to last slide - FIXED THIS LINE
            if (n < 1) {
                currentSlideIndex = slides.length;  // Changed from 'seeds.length' to 'slides.length'
            }
            
            // Hide all slides
            for (let i = 0; i < slides.length; i++) {
                slides[i].classList.remove("active");
            }
            
            // Remove active from all dots
            for (let i = 0; i < dots.length; i++) {
                dots[i].classList.remove("active");
            }
            
            // Show current slide
            if (slides.length > 0) {
                const activeSlideImage = slides[currentSlideIndex - 1];
                activeSlideImage.classList.add("active");

                // 1. Get the slide's background color (e.g., "#1c1d1d")
                const slideBgColor = activeSlideImage.style.backgroundColor; 
                
                // 2. Determine the color for the ARROW background
                let arrowBgColor;
                let arrowTextColor;

                // NOTE: If your colors are not pure hex, you'll need to adjust isColorLight() 
                // to handle the different format (like 'rgb(r, g, b)').
                // Assuming your manual styles are 6-digit hex codes (e.g., #1c1d1d)
                
                // For demonstration, let's use a simple light/dark contrast for the arrows:
                if (slideBgColor === 'rgb(28, 29, 29)' || slideBgColor === '#1c1d1d' || slideBgColor === 'rgb(0, 0, 0)') { 
                    // If the slide background is dark (like #1c1d1d or black)
                    arrowBgColor = 'rgba(255, 255, 255, 0.7)'; // Light background for contrast
                    arrowTextColor = '#000000'; // Black text/symbol
                    hoverClassName = 'arrow-hover-dark-slide'; // Choose the class for dark slides
                } else { 
                    // If the slide background is light (like #d9d9d9 or white)
                    arrowBgColor = 'rgba(0, 0, 0, 0.7)'; // Dark background for contrast
                    arrowTextColor = '#ffffff'; // White text/symbol
                    hoverClassName = 'arrow-hover-light-slide'; // Choose the class for light slides
                }

                    // 3. Apply the contrasting colors to BOTH arrows
                    for (let i = 0; i < arrows.length; i++) {
                        arrows[i].classList.remove('arrow-hover-dark-slide', 'arrow-hover-light-slide');
                        arrows[i].style.backgroundColor = arrowBgColor; 
                        arrows[i].style.color = arrowTextColor; 
                        // Apply the correct hover class!
                        arrows[i].classList.add(hoverClassName);
                    }
                }
                
                // Show current dot
                if (dots.length > 0) {
                    dots[currentSlideIndex - 1].classList.add("active");
                }
            }

        // Function to determine if a color is light or dark
        function isColorLight(hexColor) {
            // 1. Remove the '#' if it exists
            const hex = hexColor.replace('#', '');
            
            // 2. Convert to RGB values
            const r = parseInt(hex.substring(0, 2), 16);
            const g = parseInt(hex.substring(2, 4), 16);
            const b = parseInt(hex.substring(4, 6), 16);
            
            // 3. Calculate perceived luminosity (Luminosity Formula)
            // The coefficients (0.2126, 0.7152, 0.0722) are weighted based on human eye sensitivity.
            const luminosity = (0.2126 * r) + (0.7152 * g) + (0.0722 * b);

            // 4. Return true if luminosity is above a threshold (e.g., 128 out of 255)
            return luminosity > 128;
        }
        // Initialize carousel on page load
        setTimeout(function() {
            showSlide(currentSlideIndex);
        }, 100); // Small delay to ensure DOM is ready
    </script>

    <script>
        // Hamburger menu functionality
        const navbar = document.querySelector('.navbar');
        const hamburger = document.getElementById('hamburger');
        let lastScroll = 0;

        // Show/hide hamburger based on scroll position
        window.addEventListener('scroll', function() {
            const currentScroll = window.pageYOffset;
            
            if (currentScroll > 100) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
                navbar.classList.remove('menu-open');
                hamburger.classList.remove('active');
            }
        });

        // Toggle menu on hamburger click
        hamburger.addEventListener('click', function() {
            hamburger.classList.toggle('active');
            navbar.classList.toggle('menu-open');
        });

        // Close menu when clicking on a link
        document.querySelectorAll('.navbar a').forEach(link => {
            link.addEventListener('click', function() {
                hamburger.classList.remove('active');
                navbar.classList.remove('menu-open');
            });
        });
    </script>

</body>
</html>